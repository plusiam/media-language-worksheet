<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë§ì˜ í˜ê³¼ ì±…ì„ - ë§¤ì²´ì–¸ì–´ í•™ìŠµì§€</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
            position: relative;
        }

        .refresh-btn-container {
            position: absolute;
            top: 20px;
            right: 20px;
        }

        .refresh-btn {
            background: rgba(255, 255, 255, 0.3);
            color: white;
            border: 2px solid white;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: bold;
            transition: all 0.3s;
        }

        .refresh-btn:hover {
            background: rgba(255, 255, 255, 0.5);
            transform: rotate(180deg);
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .section {
            padding: 30px;
            border-bottom: 2px solid #f0f0f0;
            position: relative;
        }

        .section:last-child {
            border-bottom: none;
        }

        .section-download-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #667eea;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.8em;
            font-weight: bold;
            transition: all 0.3s;
        }

        .section-download-btn:hover {
            background: #5568d3;
            transform: scale(1.05);
        }

        .section-header {
            display: flex;
            align-items: center;
            margin-bottom: 18px;
            padding-bottom: 12px;
            border-bottom: 3px solid #667eea;
        }

        .time-badge {
            background: #667eea;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            margin-right: 15px;
            font-size: 0.9em;
        }

        .section-title {
            font-size: 1.8em;
            color: #333;
            font-weight: bold;
        }

        .strategy-badge {
            display: inline-block;
            background: #ffd93d;
            color: #333;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.85em;
            font-weight: bold;
            margin-top: 10px;
        }

        .activity {
            margin: 15px 0;
            padding: 15px;
            background: #f8f9ff;
            border-radius: 12px;
            border-left: 4px solid #667eea;
        }

        .activity-number {
            color: #667eea;
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 10px;
        }

        .activity-content {
            color: #555;
            line-height: 1.8;
            font-size: 1.05em;
        }

        textarea, input[type="text"] {
            width: 100%;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            font-family: inherit;
            margin-top: 10px;
            transition: border-color 0.3s;
            resize: vertical;
        }

        textarea:focus, input[type="text"]:focus {
            outline: none;
            border-color: #667eea;
        }

        .emoji-selector {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 15px;
        }

        .emoji-btn {
            font-size: 2em;
            padding: 10px 15px;
            border: 3px solid #ddd;
            border-radius: 10px;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
        }

        .emoji-btn:hover {
            transform: scale(1.1);
            border-color: #667eea;
        }

        .emoji-btn.selected {
            border-color: #667eea;
            background: #f8f9ff;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .distance-container {
            margin-top: 15px;
            padding: 15px;
            background: #f8f9ff;
            border-radius: 12px;
        }

        .distance-stage {
            margin: 12px 0;
            padding: 12px;
            background: white;
            border-radius: 10px;
            border: 2px solid #e0e0e0;
        }

        .stage-label {
            font-weight: bold;
            color: #667eea;
            margin-bottom: 8px;
            font-size: 0.95em;
        }

        .distance-visual {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 5px;
        }

        .person-icon {
            font-size: 1.8em;
            transition: transform 0.3s ease;
        }

        .distance-slider-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .distance-slider {
            width: 100%;
            height: 6px;
            border-radius: 5px;
            background: linear-gradient(to right, #4caf50 0%, #ffd93d 50%, #ff6b6b 100%);
            outline: none;
            -webkit-appearance: none;
        }

        .distance-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        }

        .distance-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
            border: none;
        }

        .distance-labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.75em;
            color: #666;
            padding: 0 3px;
        }

        .postit-container {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 15px;
        }

        .postit {
            background: #fff740;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            min-width: 150px;
            position: relative;
            transform: rotate(-1deg);
        }

        .postit:nth-child(even) {
            background: #7afcff;
            transform: rotate(1deg);
        }

        .postit:nth-child(3n) {
            background: #ffa6f6;
            transform: rotate(-2deg);
        }

        .postit textarea {
            margin-top: 0;
            border: none;
            background: transparent;
            width: 100%;
            resize: none;
        }

        .postit-delete-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background: #ff6b6b;
            color: white;
            border: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 0.8em;
            font-weight: bold;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .postit-delete-btn:hover {
            background: #ee5a52;
            transform: scale(1.1);
        }

        .add-postit-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            margin-top: 15px;
            font-weight: bold;
            transition: background 0.3s;
        }

        .add-postit-btn:hover {
            background: #5568d3;
        }

        .sentence-complete {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 15px;
        }

        .sentence-line {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.1em;
        }

        .sentence-line input {
            flex: 1;
            margin-top: 0;
        }

        .save-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 8px;
            font-size: 1.1em;
            cursor: pointer;
            font-weight: bold;
            margin: 30px auto;
            display: block;
            transition: transform 0.3s;
        }

        .save-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(102, 126, 234, 0.4);
        }

        .tip {
            background: #e8f5e9;
            border-left: 4px solid #4caf50;
            padding: 15px;
            margin-top: 15px;
            border-radius: 8px;
            color: #2e7d32;
            font-size: 0.95em;
        }

        .clear-btn {
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
            margin-left: 10px;
        }

        .clear-btn:hover {
            background: #ee5a52;
        }

        @media print {
            body {
                background: white;
                padding: 0;
            }
            .container {
                box-shadow: none;
            }
            .save-btn, .add-postit-btn, .clear-btn, .section-download-btn, .refresh-btn {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="refresh-btn-container">
                <button class="refresh-btn" onclick="refreshPage()" title="í˜ì´ì§€ ìƒˆë¡œ ê³ ì¹¨">ğŸ”„ ìƒˆë¡œ ê³ ì¹¨</button>
            </div>
            <h1>ğŸ’¬ ë§ì˜ í˜ê³¼ ì±…ì„</h1>
            <p>ë§¤ì²´ì–¸ì–´ - ìš•ì„¤ì´ ë¯¸ì¹˜ëŠ” ì˜í–¥ íƒêµ¬</p>
        </div>

        <!-- ë„ì… ë‹¨ê³„ -->
        <div class="section" id="section-intro">
            <button class="section-download-btn" onclick="downloadSectionAsImage('section-intro', '01_ë„ì…')">ğŸ“¸ ë‹¤ìš´ë¡œë“œ</button>
            <div class="section-header">
                <div class="time-badge">10ë¶„</div>
                <div class="section-title">ğŸŒŸ ë„ì…</div>
            </div>
            <div class="strategy-badge">ğŸ’­ See-Think-Wonder</div>

            <div class="activity">
                <div class="activity-number">â‘  íšŒìƒí•˜ê¸°</div>
                <div class="activity-content">
                    ì§€ë‚œ ì‹œê°„ ë§¤ì²´ì–¸ì–´ ìê¸°ì§„ë‹¨ì„ ë– ì˜¬ë ¤ë³´ì„¸ìš”.
                    <textarea id="recall" rows="3" placeholder="ë‚˜ì˜ ë§ìŠµê´€ì—ëŠ” ì–´ë–¤ íŠ¹ì§•ì´ ìˆì—ˆì„ê¹Œ?"></textarea>
                </div>
            </div>

            <div class="activity">
                <div class="activity-number">â‘¡ ìƒê° ì—´ê¸°</div>
                <div class="activity-content">
                    <strong>ì§ˆë¬¸:</strong> ìš•ì€ ì™œ ê·¸ë ‡ê²Œ í˜ì´ ì„¸ ë³´ì¼ê¹Œ?
                    <textarea id="opening" rows="3" placeholder="ììœ ë¡­ê²Œ ìƒê°ì„ ì ì–´ë³´ì„¸ìš”..."></textarea>
                </div>
            </div>

            <div class="activity">
                <div class="activity-number">â‘¢ ì˜¤ëŠ˜ì˜ íƒêµ¬ ì§ˆë¬¸</div>
                <div class="activity-content">
                    <div style="background: white; padding: 20px; border-radius: 10px; text-align: center; font-size: 1.3em; color: #667eea; font-weight: bold; margin-top: 10px;">
                        ìš•ì„¤ì€ ìš°ë¦¬ì˜ ê´€ê³„ì— ì–´ë–¤ ì˜í–¥ì„ ë¯¸ì¹ ê¹Œ?
                    </div>
                </div>
            </div>
        </div>

        <!-- ì „ê°œ1 ë‹¨ê³„ -->
        <div class="section" id="section-development1">
            <button class="section-download-btn" onclick="downloadSectionAsImage('section-development1', '02_ì „ê°œ1')">ğŸ“¸ ë‹¤ìš´ë¡œë“œ</button>
            <div class="section-header">
                <div class="time-badge">15ë¶„</div>
                <div class="section-title">ğŸ¬ ì „ê°œ 1 - ìš• Part 1</div>
            </div>
            <div class="strategy-badge">ğŸ’­ Think-Feel-Wonder</div>

            <div class="activity">
                <div class="activity-number">â‘  ì˜ìƒ ê´€ì°°</div>
                <div class="activity-content">
                    í”„ë ˆì  í…Œì´ì…˜ Part 1ì„ í•¨ê»˜ ì‹œì²­í•©ë‹ˆë‹¤.
                    <div class="tip">ğŸ’¡ ìš•ì´ ë“±ì¥í•´ 'ê°•í•´ ë³´ì´ê¸°'ë¥¼ ê°•ì¡°í•˜ëŠ” ì¥ë©´ì— ì£¼ëª©í•˜ì„¸ìš”!</div>
                </div>
            </div>

            <div class="activity">
                <div class="activity-number">â‘¡ ê°ì • í‘œí˜„í•˜ê¸°</div>
                <div class="activity-content">
                    ê·¸ ì¥ë©´ì„ ë³´ë©° ëŠë‚€ ì ì„ ì ê³ , ê°ì • ì´ëª¨í‹°ì½˜ì„ ì„ íƒí•˜ì„¸ìš”.
                    <textarea id="feeling1" rows="3" placeholder="ì–´ë–¤ ëŠë‚Œì´ ë“¤ì—ˆë‚˜ìš”?"></textarea>
                    
                    <div class="emoji-selector" id="emoji-selector-1">
                        <button class="emoji-btn" onclick="selectEmoji(this)">ğŸ˜Š</button>
                        <button class="emoji-btn" onclick="selectEmoji(this)">ğŸ˜¢</button>
                        <button class="emoji-btn" onclick="selectEmoji(this)">ğŸ˜¡</button>
                        <button class="emoji-btn" onclick="selectEmoji(this)">ğŸ˜°</button>
                        <button class="emoji-btn" onclick="selectEmoji(this)">ğŸ¤”</button>
                        <button class="emoji-btn" onclick="selectEmoji(this)">ğŸ˜¨</button>
                        <button class="emoji-btn" onclick="selectEmoji(this)">ğŸ’ª</button>
                        <button class="emoji-btn" onclick="selectEmoji(this)">ğŸ’”</button>
                    </div>
                </div>
            </div>

            <div class="activity">
                <div class="activity-number">â‘¢ íƒêµ¬í•˜ê¸°</div>
                <div class="activity-content">
                    <strong>ì§ˆë¬¸:</strong> ìš•ì€ ì™œ ê°•í•´ ë³´ì´ê²Œ ë§Œë“¤ê¹Œ?
                    
                    <div style="margin-top: 15px;">
                        <button class="add-postit-btn" onclick="addPostit()">ğŸ“ ìƒê° í¬ìŠ¤íŠ¸ì‡ ì¶”ê°€í•˜ê¸°</button>
                        <div class="postit-container" id="postitContainer"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ì „ê°œ2 ë‹¨ê³„ -->
        <div class="section" id="section-development2">
            <button class="section-download-btn" onclick="downloadSectionAsImage('section-development2', '03_ì „ê°œ2')">ğŸ“¸ ë‹¤ìš´ë¡œë“œ</button>
            <div class="section-header">
                <div class="time-badge">15ë¶„</div>
                <div class="section-title">ğŸ’” ì „ê°œ 2 - ìš• Part 2</div>
            </div>
            <div class="strategy-badge">ğŸ“ ê´€ê³„ ê±°ë¦¬ ì‹œê°í™” (Relationship Distance)</div>
            <div class="strategy-badge" style="margin-left: 10px;">ğŸ‘¥ Think-Pair-Share</div>

            <div class="activity">
                <div class="activity-number">â‘  ì˜ìƒ ê´€ì°°</div>
                <div class="activity-content">
                    Part 2ë¥¼ ì‹œì²­í•©ë‹ˆë‹¤: ìš•ì˜ ì˜í–¥ê³¼ íšŒë³µ ê³¼ì •
                    <div class="tip">ğŸ’¡ ê´€ê³„ê°€ ì–´ë–»ê²Œ ë³€í™”í•˜ëŠ”ì§€ ì£¼ì˜ ê¹Šê²Œ ê´€ì°°í•˜ì„¸ìš”!</div>
                </div>
            </div>

            <div class="activity">
                <div class="activity-number">â‘¡ ê´€ê³„ ê±°ë¦¬ í‘œí˜„í•˜ê¸°</div>
                <div class="activity-content">
                    "ìš• ì´í›„ ë‹¬ë¼ì§„ ê´€ê³„"ë¥¼ ê±°ë¦¬ë¡œ í‘œí˜„í•´ë³´ì„¸ìš”. ë‘ ì‚¬ëŒì´ ê°€ê¹Œìš°ë©´ ì¹œë°€í•œ ê´€ê³„, ë©€ë©´ ì†Œì›í•œ ê´€ê³„ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.
                    
                    <div class="distance-container">
                        <div class="distance-stage">
                            <div class="stage-label">â‘  ìš•í•˜ê¸° ì „</div>
                            <div class="distance-visual">
                                <span class="person-icon">ğŸ§‘</span>
                                <div class="distance-slider-container">
                                    <input type="range" id="distance1" min="0" max="100" value="20" class="distance-slider" oninput="updateDistance(1)">
                                    <div class="distance-labels">
                                        <span>ê°€ê¹Œì›€</span>
                                        <span>ë©€ì–´ì§</span>
                                    </div>
                                </div>
                                <span class="person-icon" id="person1">ğŸ§‘</span>
                            </div>
                        </div>

                        <div class="distance-stage">
                            <div class="stage-label">â‘¡ ìš•í•œ ì§í›„</div>
                            <div class="distance-visual">
                                <span class="person-icon">ğŸ§‘</span>
                                <div class="distance-slider-container">
                                    <input type="range" id="distance2" min="0" max="100" value="80" class="distance-slider" oninput="updateDistance(2)">
                                    <div class="distance-labels">
                                        <span>ê°€ê¹Œì›€</span>
                                        <span>ë©€ì–´ì§</span>
                                    </div>
                                </div>
                                <span class="person-icon" id="person2">ğŸ§‘</span>
                            </div>
                        </div>

                        <div class="distance-stage">
                            <div class="stage-label">â‘¢ íšŒë³µ ì‹œë„ í›„</div>
                            <div class="distance-visual">
                                <span class="person-icon">ğŸ§‘</span>
                                <div class="distance-slider-container">
                                    <input type="range" id="distance3" min="0" max="100" value="40" class="distance-slider" oninput="updateDistance(3)">
                                    <div class="distance-labels">
                                        <span>ê°€ê¹Œì›€</span>
                                        <span>ë©€ì–´ì§</span>
                                    </div>
                                </div>
                                <span class="person-icon" id="person3">ğŸ§‘</span>
                            </div>
                        </div>

                        <div class="tip" style="margin-top: 8px; padding: 10px; font-size: 0.9em;">ğŸ’¡ ìŠ¬ë¼ì´ë”ë¥¼ ì›€ì§ì—¬ì„œ ê´€ê³„ ê±°ë¦¬ë¥¼ í‘œí˜„í•´ë³´ì„¸ìš”!</div>
                    </div>
                </div>
            </div>

            <div class="activity">
                <div class="activity-number">â‘¢ ë¬¸ì¥ ì™„ì„±í•˜ê¸°</div>
                <div class="activity-content">
                    ì•„ë˜ ë¬¸ì¥ì„ ì™„ì„±í•´ë³´ì„¸ìš”.
                    
                    <div class="sentence-complete">
                        <div class="sentence-line">
                            <span>ìš•ì€</span>
                            <input type="text" id="blank1" placeholder="ë¬´ì—‡ì„">
                            <span>ì„/ë¥¼ ë¬´ë„ˆëœ¨ë ¸ì§€ë§Œ,</span>
                        </div>
                        <div class="sentence-line">
                            <span>ë”°ëœ»í•œ ë§ì€</span>
                            <input type="text" id="blank2" placeholder="ë¬´ì—‡ì„">
                            <span>ì„/ë¥¼ ë˜ì‚´ë ¸ë‹¤.</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ì •ë¦¬ ë‹¨ê³„ -->
        <div class="section" id="section-conclusion">
            <button class="section-download-btn" onclick="downloadSectionAsImage('section-conclusion', '04_ì •ë¦¬')">ğŸ“¸ ë‹¤ìš´ë¡œë“œ</button>
            <div class="section-header">
                <div class="time-badge">5ë¶„</div>
                <div class="section-title">âœ¨ ì •ë¦¬</div>
            </div>
            <div class="strategy-badge">ğŸ“° Headline(ê°œë…ë¬¸ì¥)</div>

            <div class="activity">
                <div class="activity-number">â‘  ê°œë… ì •ë¦¬</div>
                <div class="activity-content">
                    ì˜¤ëŠ˜ ìˆ˜ì—…ì˜ í•µì‹¬ ê°œë…
                    <div style="background: white; padding: 20px; border-radius: 10px; text-align: center; font-size: 1.2em; color: #667eea; font-weight: bold; margin-top: 10px; border: 3px dashed #667eea;">
                        ë§ì€ í˜ì´ ìˆì§€ë§Œ, ì±…ì„ì´ ë”°ë¼ì•¼ í•œë‹¤.
                    </div>
                </div>
            </div>

            <div class="activity">
                <div class="activity-number">â‘¡ ì„±ì°°ê³¼ í•™ìŠµ ì €ë„</div>
                <div class="activity-content">
                    ì˜¤ëŠ˜ ìˆ˜ì—…ì„ í†µí•´ ë°°ìš´ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ì„±ì°°í•´ë´…ì‹œë‹¤.
                    
                    <div style="margin-top: 15px;">
                        <strong style="color: #667eea;">ğŸ’­ ë‹¤ìŒ ì§ˆë¬¸ë“¤ì„ ìƒê°í•˜ë©° ììœ ë¡­ê²Œ ì‘ì„±í•´ë³´ì„¸ìš”:</strong>
                        <ul style="margin: 10px 0 10px 20px; line-height: 1.8; color: #666;">
                            <li>ë””ì§€í„¸ ê³µê°„ì—ì„œ ìš•ì´ ë‚¨ê¸°ëŠ” í”ì ì€ ë¬´ì—‡ì¼ê¹Œ?</li>
                            <li>ì˜¤ëŠ˜ ìˆ˜ì—…ì„ í†µí•´ ìƒˆë¡­ê²Œ ì•Œê²Œ ëœ ì ì€?</li>
                            <li>ë‚´ ë§ìŠµê´€ì—ì„œ ë°”ê¾¸ê³  ì‹¶ì€ ë¶€ë¶„ì€?</li>
                        </ul>
                    </div>
                    
                    <textarea id="reflection" rows="6" placeholder="ììœ ë¡­ê²Œ ìƒê°ì„ ì •ë¦¬í•´ë³´ì„¸ìš”..."></textarea>
                </div>
            </div>
        </div>

        <button class="save-btn" onclick="saveWorksheet()">ğŸ’¾ í•™ìŠµì§€ ì €ì¥í•˜ê¸° (ì¸ì‡„ ê°€ëŠ¥)</button>
    </div>

    <script>
        // í˜ì´ì§€ ìƒˆë¡œ ê³ ì¹¨ í•¨ìˆ˜
        function refreshPage() {
            if (confirm('ì •ë§ ìƒˆë¡œ ê³ ì¹¨í•˜ì‹œê² ì–´ìš”? ì‘ì„±í•œ ë‚´ìš©ì€ ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.')) {
                localStorage.removeItem('worksheetData');
                location.reload();
            }
        }

        // ì´ëª¨í‹°ì½˜ ì„ íƒ ê¸°ëŠ¥
        function selectEmoji(btn) {
            const container = btn.parentElement;
            container.querySelectorAll('.emoji-btn').forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
        }

        // í¬ìŠ¤íŠ¸ì‡ ì¶”ê°€ ê¸°ëŠ¥
        function addPostit() {
            const container = document.getElementById('postitContainer');
            const postit = document.createElement('div');
            postit.className = 'postit';
            postit.innerHTML = `
                <button class="postit-delete-btn" onclick="deletePostit(this)">âœ•</button>
                <textarea rows="3" placeholder="ìƒê°ì„ ì ì–´ë³´ì„¸ìš”..." style="border: none; background: transparent; width: 100%; resize: none;"></textarea>
            `;
            container.appendChild(postit);
        }

        // í¬ìŠ¤íŠ¸ì‡ ì‚­ì œ í•¨ìˆ˜
        function deletePostit(btn) {
            if (confirm('ì´ í¬ìŠ¤íŠ¸ì‡ì„ ì‚­ì œí•˜ì‹œê² ì–´ìš”?')) {
                btn.parentElement.remove();
            }
        }

        // ê´€ê³„ ê±°ë¦¬ ì—…ë°ì´íŠ¸ ê¸°ëŠ¥
        function updateDistance(stageNum) {
            const slider = document.getElementById(`distance${stageNum}`);
            const value = slider.value;
            
            // ìŠ¬ë¼ì´ë”ë§Œ ì‹œê°ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ (ì´ëª¨ì§€ëŠ” ê³ ì •)
            // í•„ìš”ì‹œ ì¶”í›„ ë‹¤ë¥¸ ì‹œê° íš¨ê³¼ ì¶”ê°€ ê°€ëŠ¥
        }

        // ë‹¨ê³„ë³„ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ í•¨ìˆ˜
        async function downloadSectionAsImage(sectionId, filename) {
            try {
                const section = document.getElementById(sectionId);
                const canvas = await html2canvas(section, {
                    allowTaint: true,
                    useCORS: true,
                    scale: 2,
                    backgroundColor: '#ffffff'
                });
                
                const link = document.createElement('a');
                link.href = canvas.toDataURL('image/png');
                link.download = `${filename}_í•™ìŠµê²°ê³¼_${new Date().toISOString().slice(0,10)}.png`;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                alert(`"${filename}" ë‹¨ê³„ê°€ ì´ë¯¸ì§€ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!`);
            } catch (error) {
                alert('ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸° ê±°ë¦¬ ì„¤ì •
        window.addEventListener('load', function() {
            updateDistance(1);
            updateDistance(2);
            updateDistance(3);
        });

        // ì €ì¥ ê¸°ëŠ¥
        function saveWorksheet() {
            // ì¸ì‡„ ëŒ€í™”ìƒì ì—´ê¸°
            window.print();
            
            // ì„ íƒì‚¬í•­: ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ë°ì´í„° ì €ì¥
            const data = {
                recall: document.getElementById('recall').value,
                opening: document.getElementById('opening').value,
                feeling1: document.getElementById('feeling1').value,
                distance1: document.getElementById('distance1').value,
                distance2: document.getElementById('distance2').value,
                distance3: document.getElementById('distance3').value,
                blank1: document.getElementById('blank1').value,
                blank2: document.getElementById('blank2').value,
                reflection: document.getElementById('reflection').value,
                savedAt: new Date().toLocaleString('ko-KR')
            };
            
            localStorage.setItem('worksheetData', JSON.stringify(data));
            alert('í•™ìŠµì§€ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤! ì¸ì‡„ ëŒ€í™”ìƒìë¥¼ í™•ì¸í•˜ì„¸ìš”.');
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ì „ ë°ì´í„° ë³µì›
        window.addEventListener('load', function() {
            const savedData = localStorage.getItem('worksheetData');
            if (savedData) {
                const data = JSON.parse(savedData);
                if (confirm('ì´ì „ì— ì‘ì„±í•œ ë‚´ìš©ì„ ë¶ˆëŸ¬ì˜¬ê¹Œìš”?')) {
                    document.getElementById('recall').value = data.recall || '';
                    document.getElementById('opening').value = data.opening || '';
                    document.getElementById('feeling1').value = data.feeling1 || '';
                    if (data.distance1) document.getElementById('distance1').value = data.distance1;
                    if (data.distance2) document.getElementById('distance2').value = data.distance2;
                    if (data.distance3) document.getElementById('distance3').value = data.distance3;
                    document.getElementById('blank1').value = data.blank1 || '';
                    document.getElementById('blank2').value = data.blank2 || '';
                    document.getElementById('reflection').value = data.reflection || '';
                    
                    // ê±°ë¦¬ ì‹œê°í™” ì—…ë°ì´íŠ¸
                    updateDistance(1);
                    updateDistance(2);
                    updateDistance(3);
                }
            }
        });
    </script>
</body>
</html>